# Схема моделей данных Make Meet

## Обзор

Реализована полная схема моделей данных для социальной платформы Make Meet, включающая:

- **6 основных моделей**: User, Post, Comment, Like, Sprint, SprintParticipant
- **Полиморфные связи** для лайков
- **Вложенные комментарии** через parent_comment_id
- **Полные ассоциации** между всеми моделями
- **Валидации и методы** для работы с данными

## Созданные файлы

### Модели
- `app/models/user.rb` - модель пользователя
- `app/models/post.rb` - модель поста
- `app/models/comment.rb` - модель комментария
- `app/models/like.rb` - модель лайка
- `app/models/sprint.rb` - модель спринта
- `app/models/sprint_participant.rb` - модель участника спринта

### Миграции
- `db/migrate/20241220000001_create_users.rb`
- `db/migrate/20241220000002_create_posts.rb`
- `db/migrate/20241220000003_create_comments.rb`
- `db/migrate/20241220000004_create_likes.rb`
- `db/migrate/20241220000005_create_sprints.rb`
- `db/migrate/20241220000006_create_sprint_participants.rb`

### Дополнительные файлы
- `db/schema.rb` - схема базы данных
- `db/seeds.rb` - данные для заполнения базы
- `docs/database_schema.md` - документация схемы

## Основные возможности

### User (Пользователь)
- Регистрация с уникальным username и email
- Хеширование паролей
- Автоматическая установка даты регистрации
- Методы для работы с лайками и спринтами

### Post (Пост)
- Создание постов пользователями
- Автоматическая генерация уникальных post_id
- Связь с комментариями и лайками
- Методы для работы с лайками

### Comment (Комментарий)
- Комментирование постов
- Поддержка вложенных комментариев
- Связь с автором и постом
- Методы для работы с лайками

### Like (Лайк)
- Полиморфная связь (можно лайкать посты и комментарии)
- Уникальность лайка от пользователя к объекту
- Автоматическая генерация уникальных like_id

### Sprint (Спринт)
- Создание челленджей со сроками
- Валидация дат начала и окончания
- Scopes для активных, предстоящих и завершенных спринтов
- Методы для расчета прогресса

### SprintParticipant (Участник спринта)
- Участие пользователей в спринтах
- Отслеживание прогресса (not_started, in_progress, completed, dropped)
- Автоматическая установка даты присоединения
- Методы для расчета статистики

## Использование

### Заполнение базы данных
```ruby
# Запустить seeds для заполнения тестовыми данными
rails db:seed
```

### Примеры работы с моделями
```ruby
# Создание пользователя
user = User.create!(
  username: "new_user",
  email: "user@example.com",
  password_hash: "hashed_password"
)

# Создание поста
post = user.posts.create!(content: "Новый пост!")

# Добавление комментария
comment = post.comments.create!(
  author: user,
  content: "Интересный пост!"
)

# Добавление лайка
post.like_by(user)

# Создание спринта
sprint = Sprint.create!(
  name: "30 дней кода",
  description: "Ежедневное программирование",
  start_date: Date.current,
  end_date: Date.current + 30.days
)

# Участие в спринте
SprintParticipant.create!(
  sprint: sprint,
  user: user,
  progress_status: "in_progress"
)
```

## Индексы и производительность

- Уникальные индексы для всех ID полей
- Индексы для внешних ключей
- Индексы для часто используемых полей (created_at, progress_status)
- Составные индексы для уникальности связей

Схема готова к использованию в приложении!
