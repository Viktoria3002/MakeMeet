<% content_for :title, "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å" %>

<div class="admin-container">
  <div class="admin-header">
    <h1>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h1>
    <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–∏—Å—Ç–µ–º—ã</p>
  </div>

  <div class="admin-nav">
    <%= link_to "–ì–ª–∞–≤–Ω–∞—è", admin_root_path, class: "nav-link" %>
    <%= link_to "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏", admin_users_path, class: "nav-link active" %>
    <%= link_to "–ü–æ—Å—Ç—ã", admin_posts_path, class: "nav-link" %>
    <%= link_to "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏", admin_comments_path, class: "nav-link" %>
    <%= link_to "–°–ø—Ä–∏–Ω—Ç—ã", admin_sprints_path, class: "nav-link" %>
  </div>

  <div class="admin-table-container">
    <div class="table-header">
      <h2>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (<%= @users.count %>)</h2>
    </div>

    <div class="table-responsive">
      <table class="admin-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
            <th>Email</th>
            <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
            <th>–ü–æ—Å—Ç—ã</th>
            <th>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</th>
            <th>–°–ø—Ä–∏–Ω—Ç—ã</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
            <tr>
              <td><%= user.user_id || user.id %></td>
              <td>
                <div class="user-cell">
                  <strong><%= user.username %></strong>
                </div>
              </td>
              <td><%= user.email %></td>
              <td><%= user.registration_date&.strftime("%d.%m.%Y %H:%M") %></td>
              <td>
                <span class="badge"><%= user.posts_count %></span>
              </td>
              <td>
                <span class="badge"><%= user.comments_count %></span>
              </td>
              <td>
                <span class="badge"><%= user.sprint_participants.count %></span>
              </td>
              <td>
                <div class="action-buttons">
                  <%= link_to "–£–¥–∞–ª–∏—Ç—å", 
                      admin_delete_user_path(user), 
                      method: :delete,
                      class: "btn btn-danger btn-sm",
                      confirm: "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è #{user.username}?" %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
