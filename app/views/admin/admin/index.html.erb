<% content_for :title, "–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å - Make Meet" %>

<div class="admin-container">
  <div class="admin-header">
    <h1>üîß –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</h1>
    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Make Meet</p>
  </div>

  <div class="admin-nav">
    <%= link_to "–ì–ª–∞–≤–Ω–∞—è", admin_root_path, class: "nav-link active" %>
    <%= link_to "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏", admin_users_path, class: "nav-link" %>
    <%= link_to "–ü–æ—Å—Ç—ã", admin_posts_path, class: "nav-link" %>
    <%= link_to "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏", admin_comments_path, class: "nav-link" %>
    <%= link_to "–°–ø—Ä–∏–Ω—Ç—ã", admin_sprints_path, class: "nav-link" %>
  </div>

  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">üë•</div>
      <div class="stat-content">
        <h3><%= @stats[:users_count] %></h3>
        <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">üìù</div>
      <div class="stat-content">
        <h3><%= @stats[:posts_count] %></h3>
        <p>–ü–æ—Å—Ç–æ–≤</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">üí¨</div>
      <div class="stat-content">
        <h3><%= @stats[:comments_count] %></h3>
        <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">‚ù§Ô∏è</div>
      <div class="stat-content">
        <h3><%= @stats[:likes_count] %></h3>
        <p>–õ–∞–π–∫–æ–≤</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">üèÉ</div>
      <div class="stat-content">
        <h3><%= @stats[:sprints_count] %></h3>
        <p>–°–ø—Ä–∏–Ω—Ç–æ–≤</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">üë§</div>
      <div class="stat-content">
        <h3><%= @stats[:participants_count] %></h3>
        <p>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</p>
      </div>
    </div>
  </div>

  <div class="admin-sections">
    <div class="section-card">
      <h2>üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—Ç—ã</h2>
      <div class="posts-list">
        <% @recent_posts.each do |post| %>
          <div class="post-item">
            <div class="post-info">
              <strong><%= post.author.username %></strong>
              <span class="post-date"><%= post.created_at.strftime("%d.%m.%Y %H:%M") %></span>
            </div>
            <div class="post-content">
              <%= truncate(post.content, length: 100) %>
            </div>
            <div class="post-stats">
              üí¨ <%= post.comments_count %> | ‚ù§Ô∏è <%= post.likes_count %>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <div class="section-card">
      <h2>üë• –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
      <div class="users-list">
        <% @recent_users.each do |user| %>
          <div class="user-item">
            <div class="user-info">
              <strong><%= user.username %></strong>
              <span class="user-email"><%= user.email %></span>
            </div>
            <div class="user-stats">
              üìù <%= user.posts_count %> | üí¨ <%= user.comments_count %>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <div class="section-card">
      <h2>üèÉ –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–ø—Ä–∏–Ω—Ç—ã</h2>
      <div class="sprints-list">
        <% @active_sprints.each do |sprint| %>
          <div class="sprint-item">
            <div class="sprint-info">
              <strong><%= sprint.name %></strong>
              <span class="sprint-dates">
                <%= sprint.start_date.strftime("%d.%m") %> - <%= sprint.end_date.strftime("%d.%m.%Y") %>
              </span>
            </div>
            <div class="sprint-progress">
              <div class="progress-bar">
                <div class="progress-fill" style="width: <%= sprint.progress_percentage %>%"></div>
              </div>
              <span class="progress-text"><%= sprint.progress_percentage %>%</span>
            </div>
            <div class="sprint-stats">
              üë• <%= sprint.participants_count %> —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
