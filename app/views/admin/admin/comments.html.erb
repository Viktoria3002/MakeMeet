<% content_for :title, "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å" %>

<div class="admin-container">
  <div class="admin-header">
    <h1>üí¨ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏</h1>
    <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
  </div>

  <div class="admin-nav">
    <%= link_to "–ì–ª–∞–≤–Ω–∞—è", admin_root_path, class: "nav-link" %>
    <%= link_to "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏", admin_users_path, class: "nav-link" %>
    <%= link_to "–ü–æ—Å—Ç—ã", admin_posts_path, class: "nav-link" %>
    <%= link_to "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏", admin_comments_path, class: "nav-link active" %>
    <%= link_to "–°–ø—Ä–∏–Ω—Ç—ã", admin_sprints_path, class: "nav-link" %>
  </div>

  <div class="admin-table-container">
    <div class="table-header">
      <h2>–°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (<%= @comments.count %>)</h2>
    </div>

    <div class="table-responsive">
      <table class="admin-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>–ê–≤—Ç–æ—Ä</th>
            <th>–ü–æ—Å—Ç</th>
            <th>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ</th>
            <th>–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π</th>
            <th>–î–∞—Ç–∞</th>
            <th>–õ–∞–π–∫–∏</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          <% @comments.each do |comment| %>
            <tr>
              <td><%= comment.comment_id || comment.id %></td>
              <td>
                <div class="user-cell">
                  <strong><%= comment.author.username %></strong>
                </div>
              </td>
              <td>
                <div class="post-cell">
                  <%= truncate(comment.post.content, length: 30) %>
                  <small>ID: <%= comment.post.post_id || comment.post.id %></small>
                </div>
              </td>
              <td>
                <div class="content-cell">
                  <%= truncate(comment.content, length: 60) %>
                </div>
              </td>
              <td>
                <% if comment.parent_comment_id %>
                  <span class="badge badge-warning">–û—Ç–≤–µ—Ç</span>
                <% else %>
                  <span class="badge badge-info">–û—Å–Ω–æ–≤–Ω–æ–π</span>
                <% end %>
              </td>
              <td><%= comment.created_at.strftime("%d.%m.%Y %H:%M") %></td>
              <td>
                <span class="badge badge-success"><%= comment.likes_count %></span>
              </td>
              <td>
                <div class="action-buttons">
                  <%= link_to "–£–¥–∞–ª–∏—Ç—å", 
                      admin_delete_comment_path(comment), 
                      method: :delete,
                      class: "btn btn-danger btn-sm",
                      confirm: "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?" %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
